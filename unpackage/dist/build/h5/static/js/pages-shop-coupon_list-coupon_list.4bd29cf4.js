(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-coupon_list-coupon_list"],{"0bfe":function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* uni.scss */uni-page-body[data-v-1ac28d66]{background-color:#f5f5f5}.content[data-v-1ac28d66]{padding:0 %?30?%}.content .list_item[data-v-1ac28d66]{border-radius:%?20?%;background-color:#fff;padding:%?24?% %?29?%}.content .list_item .list_item_img[data-v-1ac28d66]{width:%?130?%;height:%?130?%}.content .list_item .productInfo_v[data-v-1ac28d66]{flex:1;margin-left:%?30?%}.content .list_item .productInfo_v .productInfo_tilte[data-v-1ac28d66]{font-size:%?28?%;font-family:PingFang SC;font-weight:700;color:#333;-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden;text-overflow:ellipsis}.content .list_item .productInfo_v .productInfo_text[data-v-1ac28d66]{font-size:%?18?%;font-family:PingFang SC;font-weight:500;color:#333;opacity:.5}.content .list_item .productInfo_v .productInfo_text1[data-v-1ac28d66]{font-size:%?22?%;font-family:PingFang SC;font-weight:500;color:#f57513}.content .list_item .productInfo_v .label_box[data-v-1ac28d66]{margin:%?18?% 0}.content .list_item .productInfo_v .label_box .label_v[data-v-1ac28d66]{background:#fff3ee;border-radius:%?20?%;padding:%?6?% %?24?%;font-size:%?20?%;font-family:PingFang SC;font-weight:400;color:#f36907;margin-right:%?10?%;white-space:nowrap}.content .list_item .btn_linqu[data-v-1ac28d66]{width:%?60?%;background:linear-gradient(131deg,#faa041,#f36907);box-shadow:%?0?% %?6?% %?16?% %?0?% rgba(243,105,7,.46);border-radius:%?16?%;font-size:%?26?%;font-weight:400;color:#fff;padding:%?18?% %?34?%;text-align:center;white-space:nowrap}.content .myPopup[data-v-1ac28d66]{margin:%?392?% %?30?% 0 %?30?%;background-color:#fff;border-radius:%?40?%}.content .myPopup .popup_btn[data-v-1ac28d66]{margin-top:%?87?%;margin-bottom:%?81?%;padding:%?26?% %?201?%;background:#f36907;border-radius:%?40?%;font-size:%?30?%;font-family:PingFang SC;font-weight:700;color:#fff}.content .myPopup_qrcode[data-v-1ac28d66]{width:%?632?%;height:%?1000?%;margin:%?100?% %?30?% 0 %?30?%;background:url(/static/images/bg_qrcode.png) no-repeat;background-size:100% 100%}.content .myPopup_qrcode .ic_warning[data-v-1ac28d66]{width:%?30?%;height:%?30?%;overflow:hidden}.content .myPopup_qrcode .qrcode_style[data-v-1ac28d66]{width:%?267?%;height:%?267?%}.content .myPopup_qrcode .popup_text1[data-v-1ac28d66]{font-size:%?26?%;font-family:PingFang SC;font-weight:400;color:#f36907}.content .myPopup_qrcode .popup_text2[data-v-1ac28d66]{font-size:%?40?%;font-family:PingFang SC;font-weight:700;color:#f36907}.content .myPopup_qrcode .popup_text3[data-v-1ac28d66]{font-size:%?26?%;font-family:PingFang SC;font-weight:400;color:#666}.content .myPopup_qrcode .popup_text4[data-v-1ac28d66]{font-size:%?40?%;font-family:PingFang SC;font-weight:700;color:#333}.content .myPopup_qrcode .popup_text5[data-v-1ac28d66]{font-size:%?28?%;font-family:PingFang SC;font-weight:500;color:#666}.content .myPopup_qrcode .copy_ic[data-v-1ac28d66]{width:%?24?%;height:%?24?%;overflow:hidden;margin-left:%?20?%}.content .ic_close[data-v-1ac28d66]{width:%?74?%;height:%?74?%;overflow:hidden}body.?%PAGE?%[data-v-1ac28d66]{background-color:#f5f5f5}',""]),t.exports=e},"0fa2":function(t,e,o){"use strict";o.r(e);var n=o("a0f3"),i=o("5733");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("c1c6");var s,c=o("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"1ac28d66",null,!1,n["a"],s);e["default"]=u.exports},"111a":function(t,e,o){var n=o("0bfe");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("13332974",n,!0,{sourceMap:!1,shadowMode:!1})},5733:function(t,e,o){"use strict";o.r(e);var n=o("c829"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},a0f3:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={uniLoadMore:o("5ec7").default,defaultPage:o("fe6f").default,uniPopup:o("a6b5").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[t.list.length>0?n("v-uni-view",[t._l(t.list,(function(e){return n("v-uni-view",{staticClass:"list_item",staticStyle:{"margin-top":"30rpx"}},[n("v-uni-view",{staticClass:"flex-between-center",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.goDetails(e)}}},[n("v-uni-image",{staticClass:"list_item_img",attrs:{src:e.picurl}}),n("v-uni-view",{staticClass:"productInfo_v"},[n("v-uni-view",{staticClass:"productInfo_tilte"},[t._v(t._s(e.goodsname))]),n("v-uni-view",{staticClass:"label_box f-ai-center"},[e.discount<10&&e.discount>0?n("v-uni-view",{staticClass:"label_v"},[t._v(t._s(e.discount)+"元红包")]):t._e(),e.discount_thor<10&&e.discount_thor>0?n("v-uni-view",{staticClass:"label_v"},[t._v(t._s(e.discount_thor)+"折扣")]):t._e()],1),n("v-uni-view",{staticClass:"productInfo_text"},[t._v("至"+t._s(e.extime.replace(/T/g,":")))]),e.price>0?n("v-uni-view",{staticClass:"productInfo_text1"},[t._v("* 满"+t._s(e.price)+"使用")]):t._e()],1),n("v-uni-view",{staticClass:"f-column-end"},[n("v-uni-view",{staticStyle:{"margin-bottom":"20rpx","white-space":"nowrap"}},[t._v("库存："+t._s(e.surcount<1e3?e.surcount:"1000+"))]),n("v-uni-view",{staticClass:"btn_linqu",on:{click:function(o){o.stopPropagation(),arguments[0]=o=t.$handleEvent(o),t.getCoupon(e)}}},[t._v("领取")])],1)],1)],1)})),n("uni-load-more",{attrs:{status:t.loadStatus}})],2):n("defaultPage",{attrs:{text:"暂无查询到相关数据"}}),n("uni-popup",{ref:"popup_success",attrs:{type:"center","mask-click":!1}},[n("v-uni-view",{staticClass:"myPopup f-column-center"},[n("v-uni-image",{staticStyle:{width:"315rpx",height:"315rpx"},attrs:{src:"/static/images/success_img.png"}}),n("v-uni-view",{staticStyle:{"margin-top":"44rpx","font-size":"38rpx","font-weight":"bold",color:"#333333"}},[t._v("领取成功")]),n("v-uni-view",{staticClass:"popup_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close_success()}}},[t._v("确定")])],1)],1),n("uni-popup",{ref:"popup_qrcode",attrs:{type:"center","mask-click":!1}},[n("v-uni-view",{staticClass:"f-column-center"},[n("v-uni-view",{staticClass:"myPopup_qrcode f-column-between-center"},[n("v-uni-view",{staticClass:"f-column-center"},[n("v-uni-view",{staticClass:"f-ai-center",staticStyle:{"margin-top":"34rpx"}},[n("v-uni-image",{staticClass:"ic_warning",attrs:{src:"/static/images/ic_warning.png"}}),n("v-uni-view",{staticClass:"popup_text1",staticStyle:{"margin-left":"10rpx"}},[t._v("检测到目前您未登录，请截图保存，以免丢失")])],1),n("v-uni-view",{staticClass:"popup_text2",staticStyle:{"margin-top":"37rpx"}},[t._v(t._s(t.popupInfo.goodsname))]),n("v-uni-view",{staticClass:"popup_text3",staticStyle:{"margin-top":"29rpx"}},[t._v("请扫描二维码进行验证")])],1),n("v-uni-view",{staticClass:"f-column-center"},[n("v-uni-view",{staticClass:"popup_text4"},[t._v(t._s(t.popupInfo.discount)+"元红包 / "+t._s(t.popupInfo.discount_thor)+"折扣")]),n("v-uni-view",{staticClass:"popup_text1",staticStyle:{"font-weight":"500","margin-top":"30rpx"}},[t._v("* 满"+t._s(t.popupInfo.price)+"使用")]),n("v-uni-canvas",{directives:[{name:"show",rawName:"v-show",value:t.qrShow,expression:"qrShow"}],staticClass:"qrcode_style",staticStyle:{"margin-top":"37rpx"},attrs:{"canvas-id":"qrcode"}}),n("v-uni-view",{staticClass:"f-ai-center",staticStyle:{"margin-top":"27rpx"}},[n("v-uni-view",{staticStyle:{"font-size":"30rpx",color:"#333333"}},[t._v(t._s(t.qrCode))]),n("v-uni-image",{staticClass:"copy_ic",attrs:{src:o("7558")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copy(t.qrCode)}}})],1)],1),n("v-uni-view",{staticClass:"f-column-center"},[n("v-uni-view",{staticClass:"popup_text5"},[t._v("1.使用微信扫码查看商品;")]),n("v-uni-view",{staticClass:"popup_text5",staticStyle:{"margin-top":"29rpx","margin-bottom":"47rpx"}},[t._v("2.选购商品完成兑换。")])],1)],1),n("v-uni-image",{staticClass:"ic_close",staticStyle:{"margin-top":"36rpx"},attrs:{src:"/static/images/ic_guanbi.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close_popup_qrcode.apply(void 0,arguments)}}})],1)],1)],1)},a=[]},c1c6:function(t,e,o){"use strict";var n=o("111a"),i=o.n(n);i.a},c829:function(t,e,o){"use strict";var n=o("4ea4");o("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("2909")),a=n(o("4adc")),s=(n(o("5ec7")),n(o("2b05")),{data:function(){return{tid:-1,popupInfo:{},qrShow:!1,qrCode:"",myCouponKey:[],pageIndex:-1,pageSize:-1,pageCount:-1,list:[],isLoading:!0,loadStatus:"more"}},onLoad:function(t){console.log(t),this.tid=t.tid,uni.setNavigationBarTitle({title:t.title})},onShow:function(){this.initData()},onReachBottom:function(){this.loadMore()},onPullDownRefresh:function(){this.initData()},methods:{loadMore:function(){this.pageIndex<this.pageCount&&(this.pageIndex+=1,this.getList())},initData:function(){this.pageIndex=1,this.pageSize=10,this.pageCount=-1,this.list=[],this.requestData()},requestData:function(){this.getList()},getList:function(){var t=this;t.logining=!0;var e="?pageIndex="+this.pageIndex+"&pageSize="+this.pageSize+"&storeid=0&tid="+this.tid;t.isLoading=!0,t.loadStatus="loading",this.Http.apiResquest(this.api.getCouponPage+e,{},"POST").then((function(e){console.log("优惠券列表：",e),t.isLoading=!1,uni.stopPullDownRefresh(),e.success&&(t.list=[].concat((0,i.default)(t.list),(0,i.default)(e.list)),t.pageCount=e.pageCount,t.loadStatus=t.pageIndex<e.pageCount?"more":"nomore")}))},getCoupon:function(t){var e=this;console.log(t),this.Http.apiResquest(this.api.GetCoupon+"?couponid="+t.id,{},"POST").then((function(o){if(console.log("领取优惠券回调：",o),uni.stopPullDownRefresh(),o.success)if(uni.getStorageSync("token"))e.initData(),e.$refs.popup_success.open("top");else{e.popupInfo=t,e.qrCode=o.data,e.qrFun(e.qrCode);var n=uni.getStorageSync("myCouponList"),i=[];console.log("myCouponKey::",n),n&&(i=n),i.push(o.data),uni.setStorage({key:"myCouponList",data:i,success:function(){}}),e.$refs.popup_qrcode.open("top")}else uni.showToast({title:o.msg,icon:"none"})}))},goDetails:function(t){uni.getStorageSync("token")&&uni.navigateTo({url:"/pages/details/details?info="+JSON.stringify(t)})},close_success:function(){this.$refs.popup_success.close()},openPopup:function(t){this.popupInfo=t,this.qrFun(t.couponkey),this.$refs.popup_qrcode.open("top")},close_popup_qrcode:function(){this.$refs.popup_qrcode.close()},copy:function(t){this.$copyText(t).then((function(t){uni.showToast({title:"复制成功",icon:"none"})}))},qrFun:function(t){this.qrShow=!0,a.default.make({canvasId:"qrcode",componentInstance:this,text:t,size:130,margin:0,backgroundColor:"#ffffff",foregroundColor:"#000000",fileType:"jpg",errorCorrectLevel:a.default.errorCorrectLevel.H,success:function(t){}})}}});e.default=s}}]);